<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editor de Currículo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <style>
    
  * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(145deg, #0c0c0c, #011427);
        padding: 20px;
      }

  header.editor{
        background-color: #1e3a8a;
        color: white;
        padding: 1rem;
        font-weight: 620;
        text-align: center;
        font-size: 1.5rem;
        border-radius: 10px;
        align-items: center;
      }

      .container {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        align-items: flex-start;
        padding: 1rem;
        gap: 2rem;
      }

      .formulario {
        flex: 1 1 300px;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 15px #02ad0b;
      }

      .formulario h2 {
        margin-top: 0;
      }
      .formulario label {
        display: block;
        margin-top: 12px;
        font-weight: 500;
      }

      .formulario input,
      .formulario textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      .visualizacao {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
            
      }

      .cee{     
        color: #0f172a;
        font-size: 1.4rem;
        border-bottom: 2px solid #3b82f6;
        padding-bottom: 0.3rem;
        margin-bottom: 1.5rem;
      }
      
      .botoes {
        text-align: center;
        margin-top: 20px;
      }
  .form-group {
      margin-bottom: 15px;
    }

    .formulario label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
      color: #333;
    }

    .form-group select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background-color: #fff;
      font-size: 14px;
      transition: all 0.3s ease;
      outline: none;
      box-sizing: border-box;
    }

    .form-group select:focus {
      border-color: #007bff;
      box-shadow: 0 0 4px rgba(0, 123, 255, 0.4);
      }
      .botoes button {
        padding: 10px 20px;
        margin: 0 10px;
        background: #1e3a8a;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .botoes button:hover {
        background: #2a4bb5;
      }
/* ----- CSS extra para os novos campos (form-group para inputs datalist) ----- */
    .form-group-datalist { margin-bottom: 15px; }
    .form-group-datalist input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
      @media (max-width: 798px) {
        .botoes{
          transform-origin: top center;
        }
  .cee{     
      
        font-size: 1.2rem;
        
      }
      .formulario{
          width: 470px;
        }
      header.editor{
          font-size: 20px;
        }
      .visualizacao{
          transform: scale(0.4);
          transform-origin: top center;
        }
      .a4{
          transform: scale(1);
          transform-origin: top center;
        }}

      @media (max-width: 420px) {
        .botoes{
          transform-origin: top center;
        }
  .cee{     
        color: #0f172a;
        font-size: 1.2rem;
        ;
      }
      .formulario{
          width: 490px;
        }
      .visualizacao{
          transform: scale(0.4);
          transform-origin: top center;
        }
      .a4{
          transform: scale(1);
          transform-origin: top center;
        }}

      @media (max-width: 500px) {
        .botoes{
          transform-origin: top center;
        }
  .cee{     
        color: #0f172a;
        font-size: 1.2rem;
        ;
      }
      .formulario{
          width: 590px;
        }
      .visualizacao{
          transform: scale(0.4);
          transform-origin: top center;
        }
      .a4{
          transform: scale(1.06);
          transform-origin: top center;
        }}
        
      @media (max-width: 370px) {
        .botoes{
          transform-origin: top center;
        }
  .cee{     
        color: #0f172a;
        font-size: 1.2rem;
        ;
      }
      .formulario{
          width: 1000px;
        }

      .visualizacao{
          transform: scale(0.4);
          transform-origin: top center;
        }

      .a4{
          transform: scale(1);
          transform-origin: top center;
        }}
        

    </style>
  </head>


  <body>
    <header class="editor">Edite seu Requerimento</header>
    <div class="container">
      
      <div class="formulario">
          <h2 class="cee">Preencha com os seus dados</h2>
          <label>Sua/Vossa Excelência:</label>
          <input type="text" id="excelencia" placeholder="Substantivo da Excelência" data-input="excelencia"/>
          <label>Nome completo:</label>
          <input type="text" id="nome" placeholder="Nome Completo" data-input="nome"/>
          <label>Nome do Pai:</label>
          <input type="text" id="pai" placeholder="Nome do Pai" data-input="pai"/>
          <label>Nome da Mãe:</label>
          <input type="text" id="mae" placeholder="Nome da Mãe" data-input="mae"/>
          <label>Nº do BI:</label>
          <input type="text" id="bi" placeholder="Nº do Bilhete de Identidade" data-input="bi"/>
          <label>BI tratado na Província de: </label>
          <input type="text" id="arquivo" placeholder="BI passado pelo Arquivo da Província de" data-input="arquivo"/>
          <label>Data de Emissão do BI:</label>
          <input type="text" id="databi" placeholder="(ex: 07 de Agosto de 2025)" data-input="databi"/>

         <label for="provincia">Natural da Província de:</label>
          <input list="lista-provincias" id="provincia" placeholder="Digite ou selecione a província"/><datalist id="lista-provincias"></datalist>

          <label for="municipio">Natural do Município de:</label>
          <input list="lista-municipios" id="municipio" placeholder="Digite ou selecione o município" disabled/>
          <datalist id="lista-municipios"></datalist>
        <label>Província actual:</label>
          <input type="text" id="actual" placeholder="Província onde vives" data-input="actual"/>
        
       









        <label>Data de nascimento (ex: 07 de Agosto de 2025):</label>
          <input type="" id="datanascimento" placeholder="ex: 07 de Agosto de 2025" data-input="datanascimento"/>
            <div class="form-group">
              <label for="genero">Gênero:</label>
              <select id="genero" name="genero">
                <option value="masculino">Masculino</option>
                <option value="feminino">Feminino</option>
              </select>
            </div>


          <label>Provimento de Vaga/Categoria:</label>
        <input type="text" id="vaga" placeholder="Vaga ou categoria desejada" data-input="vaga">
          <label>Data do aviso público</label>
          <input type="date" id="dataaviso" placeholder="04/11/2025" data-input="dataaviso">
          <label>Data actual (ex: 09 de Agosto de 2025)</label>
          <input type="text" id="dataactual" placeholder="(ex: 09 de Agosto de 2025)" data-input="dataactual">
        </div>
        

        <!-- Currículo -->
        <!-- ⛔️ Removemos a classe .a4 daqui -->
        <div class="visualizacao">
            <div class="a4" id="cartaVisual"></div>
        </div>
      
      
      


      <div class="botoes">
        <button onclick="baixarPDF()">Download PDF</button>
        <button onclick="window.location.href='escolher-requerimento.html'">Voltar</button>
      </div>
    </div>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    // ----- Dados completos de Angola -----
    const provinciasInfo = {
      "Bengo": { genero: "masculino", prep: "do" },
      "Benguela": { genero: "feminino", prep: "de" },
      "Bié": { genero: "masculino", prep: "do" },
      "Cabinda": { genero: "feminino", prep: "de" },
      "Cuando Cubango": { genero: "masculino", prep: "do" },
      "Cuanza Norte": { genero: "masculino", prep: "do" },
      "Cuanza Sul": { genero: "masculino", prep: "do" },
      "Cunene": { genero: "masculino", prep: "do" },
      "Huambo": { genero: "masculino", prep: "do" },
      "Huíla": { genero: "feminino", prep: "da" },
      "Luanda": { genero: "feminino", prep: "de" },
      "Lunda Norte": { genero: "feminino", prep: "da" },
      "Lunda Sul": { genero: "feminino", prep: "da" },
      "Malanje": { genero: "feminino", prep: "de" },
      "Moxico": { genero: "masculino", prep: "do" },
      "Namibe": { genero: "masculino", prep: "do" },
      "Uíge": { genero: "masculino", prep: "do" },
      "Zaire": { genero: "masculino", prep: "do" },
      "Icolo e Bengo": { genero: "feminino", prep: "de" }
    };

    const municipiosPorProvincia = {
      "Bengo": ["Ambriz", "Bula Atumba", "Dande", "Dembos", "Nambuangongo", "Pango Aluquém"],
      "Benguela": ["Balombo","Baía Farta","Benguela","Bocoio","Caimbambo","Catumbela","Chongorói","Cubal","Ganda","Lobito"],
      "Bié": ["Andulo","Camacupa","Catabola","Chinguar","Chitembo","Cuemba","Cunhinga","Cuíto","Nharea"],
      "Cabinda": ["Belize","Buco-Zau","Cabinda","Cacongo"],
      "Cuando Cubango": ["Calai","Cuangar","Cuchi","Cuito Cuanavale","Dirico","Mavinga","Menongue","Nancova","Rivungo"],
      "Cuanza Norte": ["Ambaca","Banga","Bolongongo","Cambambe","Cazengo","Golungo Alto","Gonguembo","Lucala","Quiculungo","Samba Caju"],
      "Cuanza Sul": ["Amboim","Cassongue","Cela","Conda","Ebo","Libolo","Mussende","Porto Amboim","Quibala","Quilenda","Seles","Sumbe"],
      "Cunene": ["Cahama","Cuanhama","Curoca","Cuvelai","Namacunde","Ombadja"],
      "Huambo": ["Bailundo","Cachiungo","Caála","Ecunha","Huambo","Londuimbali","Longonjo","Mungo","Chicala-Choloanga","Chinjenje","Ucuma"],
      "Huíla": ["Caconda","Cacula","Caluquembe","Chiange","Chibia","Chicomba","Chipindo","Cuvango","Humpata","Jamba","Lubango","Matala","Quilengues","Quipungo"],
      "Luanda": ["Belas","Cacuaco","Cazenga","Ícolo e Bengo","Luanda","Quilamba Quiaxi","Quissama","Talatona","Viana"],
      "Lunda Norte": ["Cambulo","Capenda-Camulemba","Caungula","Chitato","Cuango","Cuílo","Lóvua","Lubalo","Lucapa","Xá-Muteba"],
      "Lunda Sul": ["Cacolo","Dala","Muconda","Saurimo"],
      "Malanje": ["Cacuso","Calandula","Cambundi-Catembo","Cangandala","Caombo","Cuaba Nzoji","Cunda-Dia-Baze","Luquembo","Malanje","Marimba","Massango","Mucari","Quela","Quirima"],
      "Moxico": ["Alto Zambeze","Bundas","Camanongue","Léua","Luau","Luacano","Luchazes","Cameia","Moxico"],
      "Namibe": ["Bibala","Camucuio","Moçâmedes","Tômbua","Virei"],
      "Uíge": ["Alto Cauale","Ambuíla","Bembe","Buengas","Bungo","Damba","Milunga","Mucaba","Negage","Puri","Quimbele","Quitexe","Sanza Pombo","Songo","Uíge","Zombo"],
      "Zaire": ["Cuimba","Mabanza Congo","Nóqui","Nezeto","Soio","Tomboco"],
      "Icolo e Bengo": ["Bom Jesus","Cabiri","Cabo Ledo","Calumbo","Catete","Quiçama","Sequele"]
    };

    // ----- Preenche a lista de províncias -----
    const provInput = document.getElementById("provincia");
    const listaProv = document.getElementById("lista-provincias");
    Object.keys(provinciasInfo).forEach(prov => {
      const opt = document.createElement("option");
      opt.value = prov;
      listaProv.appendChild(opt);
    });

    // ----- Quando usuário escolhe província -----
    provInput.addEventListener("input", () => {
      const prov = provInput.value;
      const info = provinciasInfo[prov];
      if (info) {
        document.querySelector('[data-id="local-prov"]').textContent = `${info.prep} ${prov}`;
      }
      const muns = municipiosPorProvincia[prov] || [];
      const municipioInput = document.getElementById("municipio");
      const listaMun = document.getElementById("lista-municipios");
      listaMun.innerHTML = "";
      muns.forEach(m => {
        const opt = document.createElement("option");
        opt.value = m;
        listaMun.appendChild(opt);
      });
      municipioInput.value = "";
      municipioInput.disabled = muns.length === 0;
    });

    // ----- Quando usuário escolhe município -----
    document.getElementById("municipio").addEventListener("input", function() {
      const mun = this.value;
      if (mun) document.querySelector('[data-id="local-mun"]').textContent = `de ${mun}`;
    });

    // ----- Quando usuário muda gênero -----
    document.getElementById("genero").addEventListener("change", function() {
      const genero = this.value;
      const mapeamento = {
        masculino: { sexo: "o" },
        feminino: { sexo: "a" }
      };
      Object.entries(mapeamento[genero]).forEach(([key, valor]) => {
        document.querySelectorAll(`[data-id="${key}"]`).forEach(el => el.textContent = valor);
      });
    });

    // ----- Atualiza outros campos que você já tinha (nome, BI, etc.) -----
    // Reposicionei esse bloco conforme seu script:
    function atualizarDados() {
      const campos = {
        excelencia: document.getElementById('excelencia'),
        nome: document.getElementById('nome'),
        pai: document.getElementById('pai'),
        mae: document.getElementById('mae'),
        bi: document.getElementById('bi'),
        arquivo: document.getElementById('arquivo'),
        databi: document.getElementById('databi'),
        vaga: document.getElementById('vaga'),
        dataaviso: document.getElementById('dataaviso'),
        actual: document.getElementById('actual'),
        datanascimento: document.getElementById('datanascimento'),
        dataactual: document.getElementById('dataactual')
      };
      campos && Object.entries(campos).forEach(([key, input]) => {
        input.addEventListener('input', () => {
          document.querySelectorAll(`#cartaVisual [data-id="${key}"]`).forEach(el => el.textContent = input.value);
        });
      });
    }

    let modeloCarregado = false;
    const cartaVisual = document.getElementById('cartaVisual');
    const modelo = new URLSearchParams(window.location.search).get('modelo') || 'requerer1';

    fetch(`modelos/${modelo}.html`)
      .then(res => res.text())
      .then(html => {
        cartaVisual.innerHTML = html;
        atualizarDados();
        modeloCarregado = true;
      });

    function baixarPDF() {
      if (!modeloCarregado) return alert("Aguarde o carregamento da carta.");
      const a4Element = cartaVisual.querySelector(".a4") || cartaVisual;
      html2pdf()
        .set({
          filename: 'requerimento.pdf',
          image: { type: 'jpeg', quality: 1 },
          html2canvas: { scale: 4 },
          jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        })
        .from(a4Element).save();
    }
  </script>


  </body>
</html>